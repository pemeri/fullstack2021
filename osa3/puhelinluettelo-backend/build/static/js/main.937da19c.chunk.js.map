{"version":3,"sources":["components/FilterForm.js","components/AddPersonForm.js","components/Person.js","components/Persons.js","services/contacts.js","components/ErrorNotification.js","components/SuccessNotification.js","App.js","index.js"],"names":["FilterForm","handleFilterSubmit","newFilter","handleFilterChange","onSubmit","value","onChange","AddPersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","type","Person","name","number","handlePersonDelete","onClick","Persons","persons","filter","person","toLowerCase","includes","map","index","baseUrl","funcs","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","ErrorNotification","message","className","SuccessNotification","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","contactService","initialContacts","event","preventDefault","target","length","personObj","some","p","setTimeout","window","confirm","personArray","findIndex","console","log","returnedObj","catch","error","concat","msg","result","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.937da19c.chunk.js","sourcesContent":["import React from 'react'\n\nconst FilterForm = ( {handleFilterSubmit, newFilter, handleFilterChange}) => {\n    return (\n        <div>\n            Filter shown with\n      <form onSubmit={handleFilterSubmit}>\n        <input value={newFilter} onChange={handleFilterChange} />\n      </form>\n        </div>\n    )\n}\n\nexport default FilterForm","import React from 'react'\n\nconst AddPersonForm = ( {addName, newName, handleNameChange, newNumber, handleNumberChange} ) => {\n    return (\n        <form onSubmit={addName}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>number: <input value={newNumber} onChange={handleNumberChange} /></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n}\n\nexport default AddPersonForm","import React from 'react'\n\nconst Person = ({name, number, handlePersonDelete}) => {\n    return (\n        <div>{name} {number} <button onClick={() => handlePersonDelete(name)}>delete</button></div> \n    )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ( {persons, newFilter, handlePersonDelete} ) => {\n    return (\n        <div>\n        { persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase())).map((person, index) => <Person key={index} name={person.name} number={person.number} handlePersonDelete={handlePersonDelete} />) }\n        </div>\n    )\n}\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst funcs = {\n    getAll,\n    create,\n    update,\n    remove\n}\n\nexport default funcs","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\nexport default ErrorNotification","import React from 'react'\n\nconst SuccessNotification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n  }\n\nexport default SuccessNotification","import React, { useState, useEffect } from 'react'\nimport FilterForm from './components/FilterForm'\nimport AddPersonForm from './components/AddPersonForm'\nimport Persons from './components/Persons'\nimport contactService from './services/contacts'\nimport ErrorNotification from './components/ErrorNotification'\nimport SuccessNotification from './components/SuccessNotification'\n\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n  \n\n  useEffect(() => {\n    contactService\n      .getAll()\n        .then(initialContacts => {\n          //console.log('Loading contacts from server...')\n          setPersons(initialContacts)\n      })\n  }, [])\n\n\n  const addName = (event) => {\n    event.preventDefault()\n    if(newName.length === 0) {\n      return\n    }\n    const personObj = {\n      name: newName,\n      number: newNumber\n    }\n    if(persons.some(p => p.name === newName && p.number === newNumber)) {\n      //console.log('Already in the phonebook!')\n      //alert(`${newName} is already added to phonebook`)\n      setErrorMessage(`${newName} is already added to phonebook`)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      return\n    }\n\n    \n    if(persons.some(p => p.name === newName && p.number !== newNumber)) {\n      const updateContact = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one? `)\n      if(!updateContact) {\n        return\n      } else {\n        \n        const personArray = [...persons]\n        const index = personArray.findIndex(p => p.name === newName)\n        if(index !== -1) {\n          console.log('Replacing id', index)\n\n          contactService\n          .update(personArray[index].id, personObj)\n          .then(returnedObj => {\n            personArray[index] = returnedObj\n            setPersons(personArray)\n            setNewName('')\n            setNewNumber('')\n            setNewFilter('')\n\n            setSuccessMessage(`Updated the phone number of ${returnedObj.name} to ${returnedObj.number}`)\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of '${personObj.name}' has already been removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          \n        }\n        \n      }\n\n\n    } else {\n      contactService\n      .create(personObj)\n        .then(returnedObj => {\n        setPersons(persons.concat(returnedObj))\n        setNewName('')\n        setNewNumber('')\n        setNewFilter('')\n\n        setSuccessMessage(`Added ${returnedObj.name}`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        const msg = error.response.data['error']\n        setErrorMessage(msg)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n    \n  }\n\n  const handleFilterSubmit = (event) => event.preventDefault()\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handlePersonDelete = (name) => {\n    const ready = window.confirm(`Delete ${name}`)\n    if(!ready) {\n      return\n    }\n\n    const result = persons.filter(p => p.name === name)\n    console.log(result)\n    \n    if(result.length === 1) {\n      const personObj = result[0]\n      //console.log('Deleting ', personObj.name, personObj.id)\n      contactService.remove(personObj.id)\n      .then(returnedObj => {\n        setPersons(persons.filter(p => p.id !== personObj.id))\n        //console.log('Deleting ', returnedObj)\n        setSuccessMessage(`Deleted ${personObj.name}`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage(\n          `Information of '${personObj.name}' has already been removed from server`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n\n    }\n    \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <FilterForm handleFilterSubmit={handleFilterSubmit} newFilter={newFilter} handleFilterChange={handleFilterChange}  />\n      <h3>Add a new name</h3>\n      <AddPersonForm  addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <div>\n        <Persons persons={persons} newFilter={newFilter} handlePersonDelete={handlePersonDelete} />\n        </div>\n      \n      \n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}